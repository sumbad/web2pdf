# Web2PDF

–£—Ç–∏–ª–∏—Ç–∞ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–µ–±-—Å–∞–π—Ç–æ–≤ –≤ PDF –¥–æ–∫—É–º–µ–Ω—Ç. –û–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–∞–π—Ç–∞ —á–µ—Ä–µ–∑ sitemap, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ PDF —Å –ø–æ–º–æ—â—å—é headless Chrome –∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üåê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü —á–µ—Ä–µ–∑ sitemap.xml
- üñ®Ô∏è –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è HTML –≤ PDF —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Chromium/Chrome
- üìö –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö PDF –≤ –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç —Å –∑–∞–∫–ª–∞–¥–∫–∞–º–∏
- üßπ –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (—Ä–µ–∫–ª–∞–º–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ cookies, —Ñ—É—Ç–µ—Ä—ã)
- üîß –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (macOS, Linux, Windows)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Rust 2024+
- Chromium –∏–ª–∏ Google Chrome

### –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
git clone <URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd web2pdf
cargo build --release
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

```bash
cargo run -- <URL> <–≤—ã—Ö–æ–¥–Ω–æ–π.pdf>
```

### –ü—Ä–∏–º–µ—Ä—ã

```bash
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±-—Å–∞–π—Ç –≤ PDF
cargo run -- https://example.com site.pdf

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–±–æ—Ä–∫–∏
./target/release/web2pdf https://example.com site.pdf
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞** - –ù–∞—Ö–æ–¥–∏—Ç Chromium/Chrome –≤ PATH –∏–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—É—Ç—è—Ö
2. **–ü–æ–ª—É—á–µ–Ω–∏–µ sitemap** - –ó–∞–≥—Ä—É–∂–∞–µ—Ç sitemap.xml —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ URL
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü** - –ò—Å–∫–ª—é—á–∞–µ—Ç –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ–¥–ø–∏—Å–∫–∞, –æ–ø–µ—á–∞—Ç–∫–∏, –∫–æ–ª–æ—Ñ–æ–Ω)
4. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ PDF** - –°–æ–∑–¥–∞–µ—Ç PDF –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ headless –±—Ä–∞—É–∑–µ—Ä
5. **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ** - –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≤—Å–µ PDF —Ñ–∞–π–ª—ã –≤ –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç —Å –∑–∞–∫–ª–∞–¥–∫–∞–º–∏

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ main.rs       # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ browser_utils.rs # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±—Ä–∞—É–∑–µ—Ä–æ–º
‚îî‚îÄ‚îÄ pdf_utils.rs  # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PDF
js/
‚îú‚îÄ‚îÄ flatten-shadow-dom.js # –û–±—Ä–∞–±–æ—Ç–∫–∞ Shadow DOM
‚îú‚îÄ‚îÄ iconify-icon.js      # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∫–æ–Ω–æ–∫ Iconify
‚îú‚îÄ‚îÄ lang-set.js          # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —è–∑—ã–∫–∞
‚îú‚îÄ‚îÄ page-cleanup.js      # –û—á–∏—Å—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
‚îú‚îÄ‚îÄ page-wait.js         # –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
‚îú‚îÄ‚îÄ prepare-habr.js      # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü Habr
‚îî‚îÄ‚îÄ title-extract.js     # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
```

### –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–±–æ—Ä–∫–∞
cargo build

# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞
cargo build --release

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
cargo test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
cargo check

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
cargo fmt

# –õ–∏–Ω—Ç–∏–Ω–≥
cargo clippy -- -D warnings
```

### –ö–ª—é—á–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `chromiumoxide` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ headless Chrome
- `reqwest` - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è sitemap
- `lopdf` - –ú–∞–Ω–∏–ø—É–ª—è—Ü–∏—è PDF –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- `quick-xml` - –ü–∞—Ä—Å–∏–Ω–≥ XML sitemap
- `tokio` - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ sitemap
- –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Chromium –∏–ª–∏ Chrome
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∞–π—Ç—ã —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º JavaScript –º–æ–≥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License